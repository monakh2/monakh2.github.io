+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdownhover"),settings=$this.data();void 0!==$this.data("animations")&&null!==$this.data("animations")&&(settings.animations=$.isArray(settings.animations)?settings.animations:settings.animations.split(" "));var options=$.extend({},Dropdownhover.DEFAULTS,settings,"object"==typeof option&&option);data||$this.data("bs.dropdownhover",data=new Dropdownhover(this,options))})}var Dropdownhover=function(element,options){this.options=options,this.$element=$(element);var that=this;this.dropdowns=this.$element.hasClass("dropdown-toggle")?this.$element.parent().find(".dropdown-menu").parent(".dropdown"):this.$element.find(".dropdown"),this.dropdowns.each(function(){$(this).on("mouseenter.bs.dropdownhover",function(e){that.show($(this).children("a, button"))})}),this.dropdowns.each(function(){$(this).on("mouseleave.bs.dropdownhover",function(e){that.hide($(this).children("a, button"))})})};Dropdownhover.TRANSITION_DURATION=300,Dropdownhover.DELAY=150,Dropdownhover.TIMEOUT,Dropdownhover.DEFAULTS={animations:["fadeInDown","fadeInRight","fadeInUp","fadeInLeft"]},Dropdownhover.prototype.show=function(_dropdownLink){var $this=$(_dropdownLink);window.clearTimeout(Dropdownhover.TIMEOUT),$(".dropdown").not($this.parents()).each(function(){$(this).removeClass("open")});var effect=this.options.animations[0];if(!$this.is(".disabled, :disabled")){var $parent=$this.parent(),isActive=$parent.hasClass("open");if(!isActive){var $dropdown=$this.next(".dropdown-menu");$parent.addClass("open");var side=this.position($dropdown);effect="top"==side?this.options.animations[2]:"right"==side?this.options.animations[3]:"left"==side?this.options.animations[1]:this.options.animations[0],$dropdown.addClass("animated "+effect);var transition=$.support.transition&&$dropdown.hasClass("animated");transition?$dropdown.one("bsTransitionEnd",function(){$dropdown.removeClass("animated "+effect)}).emulateTransitionEnd(Dropdownhover.TRANSITION_DURATION):$dropdown.removeClass("animated "+effect)}return!1}},Dropdownhover.prototype.hide=function(_dropdownLink){var $this=$(_dropdownLink),$parent=$this.parent();Dropdownhover.TIMEOUT=window.setTimeout(function(){$parent.removeClass("open")},Dropdownhover.DELAY)},Dropdownhover.prototype.position=function(dropdown){var win=$(window);dropdown.css({bottom:"",left:"",top:"",right:""}).removeClass("dropdownhover-top");var viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width(),viewport.bottom=viewport.top+win.height();var bounds=dropdown.offset();bounds.right=bounds.left+dropdown.outerWidth(),bounds.bottom=bounds.top+dropdown.outerHeight();var position=dropdown.position();position.right=bounds.left+dropdown.outerWidth(),position.bottom=bounds.top+dropdown.outerHeight();var side="",isSubnow=dropdown.parents(".dropdown-menu").length;if(isSubnow)position.left<0?(side="left",dropdown.removeClass("dropdownhover-right").addClass("dropdownhover-left")):(side="right",dropdown.addClass("dropdownhover-right").removeClass("dropdownhover-left")),bounds.left<viewport.left?(side="right",dropdown.css({left:"100%",right:"auto"}).addClass("dropdownhover-right").removeClass("dropdownhover-left")):bounds.right>viewport.right&&(side="left",dropdown.css({left:"auto",right:"100%"}).removeClass("dropdownhover-right").addClass("dropdownhover-left")),bounds.bottom>viewport.bottom?dropdown.css({bottom:"auto",top:-(bounds.bottom-viewport.bottom)}):bounds.top<viewport.top&&dropdown.css({bottom:-(viewport.top-bounds.top),top:"auto"});else{var parentLi=dropdown.parent(".dropdown"),pBounds=parentLi.offset();pBounds.right=pBounds.left+parentLi.outerWidth(),pBounds.bottom=pBounds.top+parentLi.outerHeight(),bounds.right>viewport.right&&dropdown.css({left:-(bounds.right-viewport.right),right:"auto"}),bounds.bottom>viewport.bottom&&pBounds.top-viewport.top>viewport.bottom-pBounds.bottom||dropdown.position().top<0?(side="top",dropdown.css({bottom:"100%",top:"auto"}).addClass("dropdownhover-top").removeClass("dropdownhover-bottom")):(side="bottom",dropdown.addClass("dropdownhover-bottom"))}return side};var old=$.fn.dropdownhover;$.fn.dropdownhover=Plugin,$.fn.dropdownhover.Constructor=Dropdownhover,$.fn.dropdownhover.noConflict=function(){return $.fn.dropdownhover=old,this};var resizeTimer;$(document).ready(function(){$(window).width()>=768&&$('[data-hover="dropdown"]').each(function(){var $target=$(this);Plugin.call($target,$target.data())})}),$(window).on("resize",function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){$(window).width()>=768?$('[data-hover="dropdown"]').each(function(){var $target=$(this);Plugin.call($target,$target.data())}):$('[data-hover="dropdown"]').each(function(){$(this).removeData("bs.dropdownhover"),$(this).hasClass("dropdown-toggle")?$(this).parent(".dropdown").find(".dropdown").andSelf().off("mouseenter.bs.dropdownhover mouseleave.bs.dropdownhover"):$(this).find(".dropdown").off("mouseenter.bs.dropdownhover mouseleave.bs.dropdownhover")})},200)})}(jQuery);var ResponsiveBootstrapToolkit=function($){var internal={detectionDivs:{bootstrap:{xs:$('<div class="device-xs visible-xs visible-xs-block"></div>'),sm:$('<div class="device-sm visible-sm visible-sm-block"></div>'),md:$('<div class="device-md visible-md visible-md-block"></div>'),lg:$('<div class="device-lg visible-lg visible-lg-block"></div>'),xxs:$('<div class="device-xxs"></div>')},foundation:{small:$('<div class="device-xs show-for-small-only"></div>'),medium:$('<div class="device-sm show-for-medium-only"></div>'),large:$('<div class="device-md show-for-large-only"></div>'),xlarge:$('<div class="device-lg show-for-xlarge-only"></div>')}},applyDetectionDivs:function(){$(document).ready(function(){$.each(self.breakpoints,function(alias){self.breakpoints[alias].appendTo(".responsive-bootstrap-toolkit")})})},isAnExpression:function(str){return"<"==str.charAt(0)||">"==str.charAt(0)},splitExpression:function(str){var operator=str.charAt(0),orEqual="="==str.charAt(1),index=1+(orEqual?1:0),breakpointName=str.slice(index);return{operator:operator,orEqual:orEqual,breakpointName:breakpointName}},isAnyActive:function(breakpoints){var found=!1;return $.each(breakpoints,function(index,alias){if(self.breakpoints[alias].is(":visible"))return found=!0,!1}),found},isMatchingExpression:function(str){var expression=internal.splitExpression(str),breakpointList=Object.keys(self.breakpoints),pos=breakpointList.indexOf(expression.breakpointName);if(pos!==-1){var start=0,end=0;"<"==expression.operator&&(start=0,end=expression.orEqual?++pos:pos),">"==expression.operator&&(start=expression.orEqual?pos:++pos,end=void 0);var acceptedBreakpoints=breakpointList.slice(start,end);return internal.isAnyActive(acceptedBreakpoints)}}},self={interval:300,framework:null,breakpoints:null,is:function(str){return internal.isAnExpression(str)?internal.isMatchingExpression(str):self.breakpoints[str]&&self.breakpoints[str].is(":visible")},use:function(frameworkName,breakpoints){self.framework=frameworkName.toLowerCase(),"bootstrap"===self.framework||"foundation"===self.framework?self.breakpoints=internal.detectionDivs[self.framework]:self.breakpoints=breakpoints,internal.applyDetectionDivs()},current:function(){var name="unrecognized";return $.each(self.breakpoints,function(alias){self.is(alias)&&(name=alias)}),name},changed:function(fn,ms){var timer;return function(){clearTimeout(timer),timer=setTimeout(function(){fn()},ms||self.interval)}}};return $(document).ready(function(){$('<div class="responsive-bootstrap-toolkit"></div>').appendTo("body")}),null===self.framework&&self.use("bootstrap"),self}(jQuery);"undefined"!=typeof module&&module.exports&&(module.exports=ResponsiveBootstrapToolkit),function(root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],factory):root.GMaps=factory()}(this,function(){var extend_object=function(obj,new_obj){var name;if(obj===new_obj)return obj;for(name in new_obj)void 0!==new_obj[name]&&(obj[name]=new_obj[name]);return obj},array_map=function(array,callback){var i,original_callback_params=Array.prototype.slice.call(arguments,2),array_return=[],array_length=array.length;if(Array.prototype.map&&array.map===Array.prototype.map)array_return=Array.prototype.map.call(array,function(item){var callback_params=original_callback_params.slice(0);return callback_params.splice(0,0,item),callback.apply(this,callback_params)});else for(i=0;i<array_length;i++)callback_params=original_callback_params,callback_params.splice(0,0,array[i]),array_return.push(callback.apply(this,callback_params));return array_return},array_flat=function(array){var i,new_array=[];for(i=0;i<array.length;i++)new_array=new_array.concat(array[i]);return new_array},coordsToLatLngs=function(coords,useGeoJSON){var first_coord=coords[0],second_coord=coords[1];return useGeoJSON&&(first_coord=coords[1],second_coord=coords[0]),new google.maps.LatLng(first_coord,second_coord)},arrayToLatLng=function(coords,useGeoJSON){var i;for(i=0;i<coords.length;i++)coords[i]instanceof google.maps.LatLng||(coords[i].length>0&&"object"==typeof coords[i][0]?coords[i]=arrayToLatLng(coords[i],useGeoJSON):coords[i]=coordsToLatLngs(coords[i],useGeoJSON));return coords},getElementsByClassName=function(class_name,context){var element,_class=class_name.replace(".","");return element="jQuery"in this&&context?$("."+_class,context)[0]:document.getElementsByClassName(_class)[0]},getElementById=function(id,context){var element,id=id.replace("#","");return element="jQuery"in window&&context?$("#"+id,context)[0]:document.getElementById(id)},findAbsolutePosition=function(obj){var curleft=0,curtop=0;if(obj.getBoundingClientRect){var rect=obj.getBoundingClientRect(),sx=-(window.scrollX?window.scrollX:window.pageXOffset),sy=-(window.scrollY?window.scrollY:window.pageYOffset);return[rect.left-sx,rect.top-sy]}if(obj.offsetParent)do curleft+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent);return[curleft,curtop]},GMaps=function(global){"use strict";var doc=document,GMaps=function(options){if("object"!=typeof window.google||!window.google.maps)return"object"==typeof window.console&&window.console.error,function(){};if(!this)return new GMaps(options);options.zoom=options.zoom||15,options.mapType=options.mapType||"roadmap";var i,valueOrDefault=function(value,defaultValue){return void 0===value?defaultValue:value},self=this,events_that_hide_context_menu=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],events_that_doesnt_hide_context_menu=["mousemove","mouseout","mouseover"],options_to_be_deleted=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],identifier=options.el||options.div,markerClustererFunction=options.markerClusterer,mapType=google.maps.MapTypeId[options.mapType.toUpperCase()],map_center=new google.maps.LatLng(options.lat,options.lng),zoomControl=valueOrDefault(options.zoomControl,!0),zoomControlOpt=options.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},zoomControlStyle=zoomControlOpt.style||"DEFAULT",zoomControlPosition=zoomControlOpt.position||"TOP_LEFT",panControl=valueOrDefault(options.panControl,!0),mapTypeControl=valueOrDefault(options.mapTypeControl,!0),scaleControl=valueOrDefault(options.scaleControl,!0),streetViewControl=valueOrDefault(options.streetViewControl,!0),overviewMapControl=valueOrDefault(overviewMapControl,!0),map_options={},map_base_options={zoom:this.zoom,center:map_center,mapTypeId:mapType},map_controls_options={panControl:panControl,zoomControl:zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[zoomControlStyle],position:google.maps.ControlPosition[zoomControlPosition]},mapTypeControl:mapTypeControl,scaleControl:scaleControl,streetViewControl:streetViewControl,overviewMapControl:overviewMapControl};if("string"==typeof options.el||"string"==typeof options.div?identifier.indexOf("#")>-1?this.el=getElementById(identifier,options.context):this.el=getElementsByClassName.apply(this,[identifier,options.context]):this.el=identifier,"undefined"==typeof this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[self.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=options.zoom,this.registered_events={},this.el.style.width=options.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=options.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=options.enableNewStyle,i=0;i<options_to_be_deleted.length;i++)delete options[options_to_be_deleted[i]];for(1!=options.disableDefaultUI&&(map_base_options=extend_object(map_base_options,map_controls_options)),map_options=extend_object(map_base_options,options),i=0;i<events_that_hide_context_menu.length;i++)delete map_options[events_that_hide_context_menu[i]];for(i=0;i<events_that_doesnt_hide_context_menu.length;i++)delete map_options[events_that_doesnt_hide_context_menu[i]];this.map=new google.maps.Map(this.el,map_options),markerClustererFunction&&(this.markerClusterer=markerClustererFunction.apply(this,[this.map]));var buildContextMenuHTML=function(control,e){var html="",options=window.context_menu[self.el.id][control];for(var i in options)if(options.hasOwnProperty(i)){var option=options[i];html+='<li><a id="'+control+"_"+i+'" href="#">'+option.title+"</a></li>"}if(getElementById("gmaps_context_menu")){var context_menu_element=getElementById("gmaps_context_menu");context_menu_element.innerHTML=html;var i,context_menu_items=context_menu_element.getElementsByTagName("a"),context_menu_items_count=context_menu_items.length;for(i=0;i<context_menu_items_count;i++){var context_menu_item=context_menu_items[i],assign_menu_item_action=function(ev){ev.preventDefault(),options[this.id.replace(control+"_","")].action.apply(self,[e]),self.hideContextMenu()};google.maps.event.clearListeners(context_menu_item,"click"),google.maps.event.addDomListenerOnce(context_menu_item,"click",assign_menu_item_action,!1)}var position=findAbsolutePosition.apply(this,[self.el]),left=position[0]+e.pixel.x-15,top=position[1]+e.pixel.y-15;context_menu_element.style.left=left+"px",context_menu_element.style.top=top+"px"}};this.buildContextMenu=function(control,e){if("marker"===control){e.pixel={};var overlay=new google.maps.OverlayView;overlay.setMap(self.map),overlay.draw=function(){var projection=overlay.getProjection(),position=e.marker.getPosition();e.pixel=projection.fromLatLngToContainerPixel(position),buildContextMenuHTML(control,e)}}else buildContextMenuHTML(control,e);var context_menu_element=getElementById("gmaps_context_menu");setTimeout(function(){context_menu_element.style.display="block"},0)},this.setContextMenu=function(options){window.context_menu[self.el.id][options.control]={};var i,ul=doc.createElement("ul");for(i in options.options)if(options.options.hasOwnProperty(i)){var option=options.options[i];window.context_menu[self.el.id][options.control][option.name]={title:option.title,action:option.action}}ul.id="gmaps_context_menu",ul.style.display="none",ul.style.position="absolute",ul.style.minWidth="100px",ul.style.background="white",ul.style.listStyle="none",ul.style.padding="8px",ul.style.boxShadow="2px 2px 6px #ccc",getElementById("gmaps_context_menu")||doc.body.appendChild(ul);var context_menu_element=getElementById("gmaps_context_menu");google.maps.event.addDomListener(context_menu_element,"mouseout",function(ev){ev.relatedTarget&&this.contains(ev.relatedTarget)||window.setTimeout(function(){context_menu_element.style.display="none"},400)},!1)},this.hideContextMenu=function(){var context_menu_element=getElementById("gmaps_context_menu");context_menu_element&&(context_menu_element.style.display="none")};var setupListener=function(object,name){google.maps.event.addListener(object,name,function(e){void 0==e&&(e=this),options[name].apply(this,[e]),self.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var ev=0;ev<events_that_hide_context_menu.length;ev++){var name=events_that_hide_context_menu[ev];name in options&&setupListener(this.map,name)}for(var ev=0;ev<events_that_doesnt_hide_context_menu.length;ev++){var name=events_that_doesnt_hide_context_menu[ev];name in options&&setupListener(this.map,name)}google.maps.event.addListener(this.map,"rightclick",function(e){options.rightclick&&options.rightclick.apply(this,[e]),void 0!=window.context_menu[self.el.id].map&&self.buildContextMenu("map",e)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){var i,latLngs=[],markers_length=this.markers.length;for(i=0;i<markers_length;i++)"boolean"==typeof this.markers[i].visible&&this.markers[i].visible&&latLngs.push(this.markers[i].getPosition());this.fitLatLngBounds(latLngs)},this.fitLatLngBounds=function(latLngs){var i,total=latLngs.length,bounds=new google.maps.LatLngBounds;for(i=0;i<total;i++)bounds.extend(latLngs[i]);this.map.fitBounds(bounds)},this.setCenter=function(lat,lng,callback){this.map.panTo(new google.maps.LatLng(lat,lng)),callback&&callback()},this.getElement=function(){return this.el},this.zoomIn=function(value){value=value||1,this.zoom=this.map.getZoom()+value,this.map.setZoom(this.zoom)},this.zoomOut=function(value){value=value||1,this.zoom=this.map.getZoom()-value,this.map.setZoom(this.zoom)};var method,native_methods=[];for(method in this.map)"function"!=typeof this.map[method]||this[method]||native_methods.push(method);for(i=0;i<native_methods.length;i++)!function(gmaps,scope,method_name){gmaps[method_name]=function(){return scope[method_name].apply(scope,arguments)}}(this,this.map,native_methods[i])};return GMaps}(this);GMaps.prototype.createControl=function(options){var control=document.createElement("div");control.style.cursor="pointer",options.disableDefaultStyles!==!0&&(control.style.fontFamily="Roboto, Arial, sans-serif",control.style.fontSize="11px",control.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px");for(var option in options.style)control.style[option]=options.style[option];options.id&&(control.id=options.id),options.title&&(control.title=options.title),options.classes&&(control.className=options.classes),options.content&&("string"==typeof options.content?control.innerHTML=options.content:options.content instanceof HTMLElement&&control.appendChild(options.content)),options.position&&(control.position=google.maps.ControlPosition[options.position.toUpperCase()]);for(var ev in options.events)!function(object,name){google.maps.event.addDomListener(object,name,function(){options.events[name].apply(this,[this])})}(control,ev);return control.index=1,control},GMaps.prototype.addControl=function(options){var control=this.createControl(options);return this.controls.push(control),this.map.controls[control.position].push(control),control},GMaps.prototype.removeControl=function(control){var i,position=null;for(i=0;i<this.controls.length;i++)this.controls[i]==control&&(position=this.controls[i].position,this.controls.splice(i,1));if(position)for(i=0;i<this.map.controls.length;i++){var controlsForPosition=this.map.controls[control.position];if(controlsForPosition.getAt(i)==control){controlsForPosition.removeAt(i);break}}return control},GMaps.prototype.createMarker=function(options){if(void 0==options.lat&&void 0==options.lng&&void 0==options.position)throw"No latitude or longitude defined.";var self=this,details=options.details,fences=options.fences,outside=options.outside,base_options={position:new google.maps.LatLng(options.lat,options.lng),map:null},marker_options=extend_object(base_options,options);delete marker_options.lat,delete marker_options.lng,delete marker_options.fences,delete marker_options.outside;var marker=new google.maps.Marker(marker_options);if(marker.fences=fences,options.infoWindow){marker.infoWindow=new google.maps.InfoWindow(options.infoWindow);for(var info_window_events=["closeclick","content_changed","domready","position_changed","zindex_changed"],ev=0;ev<info_window_events.length;ev++)!function(object,name){options.infoWindow[name]&&google.maps.event.addListener(object,name,function(e){options.infoWindow[name].apply(this,[e])})}(marker.infoWindow,info_window_events[ev])}for(var marker_events=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],marker_events_with_mouse=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],ev=0;ev<marker_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(){options[name].apply(this,[this])})}(marker,marker_events[ev]);for(var ev=0;ev<marker_events_with_mouse.length;ev++)!function(map,object,name){options[name]&&google.maps.event.addListener(object,name,function(me){me.pixel||(me.pixel=map.getProjection().fromLatLngToPoint(me.latLng)),options[name].apply(this,[me])})}(this.map,marker,marker_events_with_mouse[ev]);return google.maps.event.addListener(marker,"click",function(){this.details=details,options.click&&options.click.apply(this,[this]),marker.infoWindow&&(self.hideInfoWindows(),marker.infoWindow.open(self.map,marker))}),google.maps.event.addListener(marker,"rightclick",function(e){e.marker=this,options.rightclick&&options.rightclick.apply(this,[e]),void 0!=window.context_menu[self.el.id].marker&&self.buildContextMenu("marker",e)}),marker.fences&&google.maps.event.addListener(marker,"dragend",function(){self.checkMarkerGeofence(marker,function(m,f){outside(m,f)})}),marker},GMaps.prototype.addMarker=function(options){var marker;if(options.hasOwnProperty("gm_accessors_"))marker=options;else{if(!(options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")||options.position))throw"No latitude or longitude defined.";marker=this.createMarker(options)}return marker.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(marker),this.markers.push(marker),GMaps.fire("marker_added",marker,this),marker},GMaps.prototype.addMarkers=function(array){for(var marker,i=0;marker=array[i];i++)this.addMarker(marker);return this.markers},GMaps.prototype.hideInfoWindows=function(){for(var marker,i=0;marker=this.markers[i];i++)marker.infoWindow&&marker.infoWindow.close()},GMaps.prototype.removeMarker=function(marker){for(var i=0;i<this.markers.length;i++)if(this.markers[i]===marker){this.markers[i].setMap(null),this.markers.splice(i,1),this.markerClusterer&&this.markerClusterer.removeMarker(marker),GMaps.fire("marker_removed",marker,this);break}return marker},GMaps.prototype.removeMarkers=function(collection){var new_markers=[];if("undefined"==typeof collection){for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];marker.setMap(null),GMaps.fire("marker_removed",marker,this)}this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers(),this.markers=new_markers}else{for(var i=0;i<collection.length;i++){var index=this.markers.indexOf(collection[i]);if(index>-1){var marker=this.markers[index];marker.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(marker),GMaps.fire("marker_removed",marker,this)}}for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];null!=marker.getMap()&&new_markers.push(marker)}this.markers=new_markers}},GMaps.prototype.drawOverlay=function(options){var overlay=new google.maps.OverlayView,auto_show=!0;return overlay.setMap(this.map),null!=options.auto_show&&(auto_show=options.auto_show),overlay.onAdd=function(){var el=document.createElement("div");el.style.borderStyle="none",el.style.borderWidth="0px",el.style.position="absolute",el.style.zIndex=100,el.innerHTML=options.content,overlay.el=el,options.layer||(options.layer="overlayLayer");var panes=this.getPanes(),overlayLayer=panes[options.layer],stop_overlay_events=["contextmenu","DOMMouseScroll","dblclick","mousedown"];overlayLayer.appendChild(el);for(var ev=0;ev<stop_overlay_events.length;ev++)!function(object,name){google.maps.event.addDomListener(object,name,function(e){navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all?(e.cancelBubble=!0,e.returnValue=!1):e.stopPropagation()})}(el,stop_overlay_events[ev]);options.click&&(panes.overlayMouseTarget.appendChild(overlay.el),google.maps.event.addDomListener(overlay.el,"click",function(){options.click.apply(overlay,[overlay])})),google.maps.event.trigger(this,"ready")},overlay.draw=function(){var projection=this.getProjection(),pixel=projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat,options.lng));options.horizontalOffset=options.horizontalOffset||0,options.verticalOffset=options.verticalOffset||0;var el=overlay.el,content=el.children[0],content_height=content.clientHeight,content_width=content.clientWidth;switch(options.verticalAlign){case"top":el.style.top=pixel.y-content_height+options.verticalOffset+"px";break;default:case"middle":el.style.top=pixel.y-content_height/2+options.verticalOffset+"px";break;case"bottom":el.style.top=pixel.y+options.verticalOffset+"px"}switch(options.horizontalAlign){case"left":el.style.left=pixel.x-content_width+options.horizontalOffset+"px";break;default:case"center":el.style.left=pixel.x-content_width/2+options.horizontalOffset+"px";break;case"right":el.style.left=pixel.x+options.horizontalOffset+"px"}el.style.display=auto_show?"block":"none",auto_show||options.show.apply(this,[el])},overlay.onRemove=function(){var el=overlay.el;options.remove?options.remove.apply(this,[el]):(overlay.el.parentNode.removeChild(overlay.el),overlay.el=null)},this.overlays.push(overlay),overlay},GMaps.prototype.removeOverlay=function(overlay){for(var i=0;i<this.overlays.length;i++)if(this.overlays[i]===overlay){this.overlays[i].setMap(null),this.overlays.splice(i,1);break}},GMaps.prototype.removeOverlays=function(){for(var item,i=0;item=this.overlays[i];i++)item.setMap(null);this.overlays=[]},GMaps.prototype.drawPolyline=function(options){var path=[],points=options.path;if(points.length)if(void 0===points[0][0])path=points;else for(var latlng,i=0;latlng=points[i];i++)path.push(new google.maps.LatLng(latlng[0],latlng[1]));var polyline_options={map:this.map,path:path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight,geodesic:options.geodesic,clickable:!0,editable:!1,visible:!0};options.hasOwnProperty("clickable")&&(polyline_options.clickable=options.clickable),options.hasOwnProperty("editable")&&(polyline_options.editable=options.editable),options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),options.hasOwnProperty("zIndex")&&(polyline_options.zIndex=options.zIndex);for(var polyline=new google.maps.Polyline(polyline_options),polyline_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polyline_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polyline,polyline_events[ev]);return this.polylines.push(polyline),GMaps.fire("polyline_added",polyline,this),polyline},GMaps.prototype.removePolyline=function(polyline){for(var i=0;i<this.polylines.length;i++)if(this.polylines[i]===polyline){this.polylines[i].setMap(null),this.polylines.splice(i,1),GMaps.fire("polyline_removed",polyline,this);break}},GMaps.prototype.removePolylines=function(){for(var item,i=0;item=this.polylines[i];i++)item.setMap(null);this.polylines=[]},GMaps.prototype.drawCircle=function(options){options=extend_object({map:this.map,center:new google.maps.LatLng(options.lat,options.lng)},options),delete options.lat,delete options.lng;for(var polygon=new google.maps.Circle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),polygon},GMaps.prototype.drawRectangle=function(options){options=extend_object({map:this.map},options);var latLngBounds=new google.maps.LatLngBounds(new google.maps.LatLng(options.bounds[0][0],options.bounds[0][1]),new google.maps.LatLng(options.bounds[1][0],options.bounds[1][1]));options.bounds=latLngBounds;for(var polygon=new google.maps.Rectangle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),polygon},GMaps.prototype.drawPolygon=function(options){var useGeoJSON=!1;options.hasOwnProperty("useGeoJSON")&&(useGeoJSON=options.useGeoJSON),delete options.useGeoJSON,options=extend_object({map:this.map},options),0==useGeoJSON&&(options.paths=[options.paths.slice(0)]),options.paths.length>0&&options.paths[0].length>0&&(options.paths=array_flat(array_map(options.paths,arrayToLatLng,useGeoJSON)));for(var polygon=new google.maps.Polygon(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),GMaps.fire("polygon_added",polygon,this),polygon},GMaps.prototype.removePolygon=function(polygon){for(var i=0;i<this.polygons.length;i++)if(this.polygons[i]===polygon){this.polygons[i].setMap(null),this.polygons.splice(i,1),GMaps.fire("polygon_removed",polygon,this);break}},GMaps.prototype.removePolygons=function(){for(var item,i=0;item=this.polygons[i];i++)item.setMap(null);this.polygons=[]},GMaps.prototype.getFromFusionTables=function(options){var events=options.events;delete options.events;var fusion_tables_options=options,layer=new google.maps.FusionTablesLayer(fusion_tables_options);for(var ev in events)!function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})}(layer,ev);return this.layers.push(layer),layer},GMaps.prototype.loadFromFusionTables=function(options){var layer=this.getFromFusionTables(options);return layer.setMap(this.map),layer},GMaps.prototype.getFromKML=function(options){var url=options.url,events=options.events;delete options.url,delete options.events;var kml_options=options,layer=new google.maps.KmlLayer(url,kml_options);for(var ev in events)!function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})}(layer,ev);return this.layers.push(layer),layer},GMaps.prototype.loadFromKML=function(options){var layer=this.getFromKML(options);return layer.setMap(this.map),layer},GMaps.prototype.addLayer=function(layerName,options){options=options||{};var layer;switch(layerName){case"weather":this.singleLayers.weather=layer=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=layer=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=layer=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=layer=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=layer=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=layer=new google.maps.panoramio.PanoramioLayer,layer.setTag(options.filter),delete options.filter,options.click&&google.maps.event.addListener(layer,"click",function(event){
options.click(event),delete options.click});break;case"places":if(this.singleLayers.places=layer=new google.maps.places.PlacesService(this.map),options.search||options.nearbySearch||options.radarSearch){var placeSearchRequest={bounds:options.bounds||null,keyword:options.keyword||null,location:options.location||null,name:options.name||null,radius:options.radius||null,rankBy:options.rankBy||null,types:options.types||null};options.radarSearch&&layer.radarSearch(placeSearchRequest,options.radarSearch),options.search&&layer.search(placeSearchRequest,options.search),options.nearbySearch&&layer.nearbySearch(placeSearchRequest,options.nearbySearch)}if(options.textSearch){var textSearchRequest={bounds:options.bounds||null,location:options.location||null,query:options.query||null,radius:options.radius||null};layer.textSearch(textSearchRequest,options.textSearch)}}if(void 0!==layer)return"function"==typeof layer.setOptions&&layer.setOptions(options),"function"==typeof layer.setMap&&layer.setMap(this.map),layer},GMaps.prototype.removeLayer=function(layer){if("string"==typeof layer&&void 0!==this.singleLayers[layer])this.singleLayers[layer].setMap(null),delete this.singleLayers[layer];else for(var i=0;i<this.layers.length;i++)if(this.layers[i]===layer){this.layers[i].setMap(null),this.layers.splice(i,1);break}};var travelMode,unitSystem;return GMaps.prototype.getRoutes=function(options){switch(options.travelMode){case"bicycling":travelMode=google.maps.TravelMode.BICYCLING;break;case"transit":travelMode=google.maps.TravelMode.TRANSIT;break;case"driving":travelMode=google.maps.TravelMode.DRIVING;break;default:travelMode=google.maps.TravelMode.WALKING}unitSystem="imperial"===options.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var base_options={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},request_options=extend_object(base_options,options);request_options.origin=/string/.test(typeof options.origin)?options.origin:new google.maps.LatLng(options.origin[0],options.origin[1]),request_options.destination=/string/.test(typeof options.destination)?options.destination:new google.maps.LatLng(options.destination[0],options.destination[1]),request_options.travelMode=travelMode,request_options.unitSystem=unitSystem,delete request_options.callback,delete request_options.error;var routes=[],service=new google.maps.DirectionsService;service.route(request_options,function(result,status){if(status===google.maps.DirectionsStatus.OK){for(var r in result.routes)result.routes.hasOwnProperty(r)&&routes.push(result.routes[r]);options.callback&&options.callback(routes,result,status)}else options.error&&options.error(result,status)})},GMaps.prototype.removeRoutes=function(){this.routes.length=0},GMaps.prototype.getElevations=function(options){options=extend_object({locations:[],path:!1,samples:256},options),options.locations.length>0&&options.locations[0].length>0&&(options.locations=array_flat(array_map([options.locations],arrayToLatLng,!1)));var callback=options.callback;delete options.callback;var service=new google.maps.ElevationService;if(options.path){var pathRequest={path:options.locations,samples:options.samples};service.getElevationAlongPath(pathRequest,function(result,status){callback&&"function"==typeof callback&&callback(result,status)})}else delete options.path,delete options.samples,service.getElevationForLocations(options,function(result,status){callback&&"function"==typeof callback&&callback(result,status)})},GMaps.prototype.cleanRoute=GMaps.prototype.removePolylines,GMaps.prototype.renderRoute=function(options,renderOptions){var display,panel="string"==typeof renderOptions.panel?document.getElementById(renderOptions.panel.replace("#","")):renderOptions.panel;renderOptions.panel=panel,renderOptions=extend_object({map:this.map},renderOptions),display=new google.maps.DirectionsRenderer(renderOptions),this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,avoidHighways:options.avoidHighways,avoidTolls:options.avoidTolls,optimizeWaypoints:options.optimizeWaypoints,callback:function(routes,response,status){status===google.maps.DirectionsStatus.OK&&display.setDirections(response)}})},GMaps.prototype.drawRoute=function(options){var self=this;this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,avoidHighways:options.avoidHighways,avoidTolls:options.avoidTolls,optimizeWaypoints:options.optimizeWaypoints,callback:function(routes){if(routes.length>0){var polyline_options={path:routes[routes.length-1].overview_path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.callback&&options.callback(routes[routes.length-1])}}})},GMaps.prototype.travelRoute=function(options){if(options.origin&&options.destination)this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,callback:function(e){if(e.length>0&&options.start&&options.start(e[e.length-1]),e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0)for(var step,steps=route.legs[0].steps,i=0;step=steps[i];i++)step.step_number=i,options.step(step,route.legs[0].steps.length-1)}e.length>0&&options.end&&options.end(e[e.length-1])}});else if(options.route&&options.route.legs.length>0)for(var step,steps=options.route.legs[0].steps,i=0;step=steps[i];i++)step.step_number=i,options.step(step)},GMaps.prototype.drawSteppedRoute=function(options){var self=this;if(options.origin&&options.destination)this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,error:options.error,callback:function(e){if(e.length>0&&options.start&&options.start(e[e.length-1]),e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0)for(var step,steps=route.legs[0].steps,i=0;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.step(step,route.legs[0].steps.length-1)}}e.length>0&&options.end&&options.end(e[e.length-1])}});else if(options.route&&options.route.legs.length>0)for(var step,steps=options.route.legs[0].steps,i=0;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.step(step)}},GMaps.Route=function(options){this.origin=options.origin,this.destination=options.destination,this.waypoints=options.waypoints,this.map=options.map,this.route=options.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;var polyline_options={path:new google.maps.MVCArray,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),this.polyline=this.map.drawPolyline(polyline_options).getPath()},GMaps.Route.prototype.getRoute=function(options){var self=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:options.travelMode,waypoints:this.waypoints||[],error:options.error,callback:function(){self.route=e[0],options.callback&&options.callback.call(self)}})},GMaps.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var path=this.route.legs[0].steps[this.step_count].path;for(var p in path)path.hasOwnProperty(p)&&this.polyline.pop()}},GMaps.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var path=this.route.legs[0].steps[this.step_count].path;for(var p in path)path.hasOwnProperty(p)&&this.polyline.push(path[p]);this.step_count++}},GMaps.prototype.checkGeofence=function(lat,lng,fence){return fence.containsLatLng(new google.maps.LatLng(lat,lng))},GMaps.prototype.checkMarkerGeofence=function(marker,outside_callback){if(marker.fences)for(var fence,i=0;fence=marker.fences[i];i++){var pos=marker.getPosition();this.checkGeofence(pos.lat(),pos.lng(),fence)||outside_callback(marker,fence)}},GMaps.prototype.toImage=function(options){var options=options||{},static_map_options={};if(static_map_options.size=options.size||[this.el.clientWidth,this.el.clientHeight],static_map_options.lat=this.getCenter().lat(),static_map_options.lng=this.getCenter().lng(),this.markers.length>0){static_map_options.markers=[];for(var i=0;i<this.markers.length;i++)static_map_options.markers.push({lat:this.markers[i].getPosition().lat(),lng:this.markers[i].getPosition().lng()})}if(this.polylines.length>0){var polyline=this.polylines[0];static_map_options.polyline={},static_map_options.polyline.path=google.maps.geometry.encoding.encodePath(polyline.getPath()),static_map_options.polyline.strokeColor=polyline.strokeColor,static_map_options.polyline.strokeOpacity=polyline.strokeOpacity,static_map_options.polyline.strokeWeight=polyline.strokeWeight}return GMaps.staticMapURL(static_map_options)},GMaps.staticMapURL=function(options){function parseColor(color,opacity){if("#"===color[0]&&(color=color.replace("#","0x"),opacity)){if(opacity=parseFloat(opacity),opacity=Math.min(1,Math.max(opacity,0)),0===opacity)return"0x00000000";opacity=(255*opacity).toString(16),1===opacity.length&&(opacity+=opacity),color=color.slice(0,8)+opacity}return color}var data,parameters=[],static_root=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";options.url&&(static_root=options.url,delete options.url),static_root+="?";var markers=options.markers;delete options.markers,!markers&&options.marker&&(markers=[options.marker],delete options.marker);var styles=options.styles;delete options.styles;var polyline=options.polyline;if(delete options.polyline,options.center)parameters.push("center="+options.center),delete options.center;else if(options.address)parameters.push("center="+options.address),delete options.address;else if(options.lat)parameters.push(["center=",options.lat,",",options.lng].join("")),delete options.lat,delete options.lng;else if(options.visible){var visible=encodeURI(options.visible.join("|"));parameters.push("visible="+visible)}var size=options.size;size?(size.join&&(size=size.join("x")),delete options.size):size="630x300",parameters.push("size="+size),options.zoom||options.zoom===!1||(options.zoom=15);var sensor=!options.hasOwnProperty("sensor")||!!options.sensor;delete options.sensor,parameters.push("sensor="+sensor);for(var param in options)options.hasOwnProperty(param)&&parameters.push(param+"="+options[param]);if(markers)for(var marker,loc,i=0;data=markers[i];i++){marker=[],data.size&&"normal"!==data.size?(marker.push("size:"+data.size),delete data.size):data.icon&&(marker.push("icon:"+encodeURI(data.icon)),delete data.icon),data.color&&(marker.push("color:"+data.color.replace("#","0x")),delete data.color),data.label&&(marker.push("label:"+data.label[0].toUpperCase()),delete data.label),loc=data.address?data.address:data.lat+","+data.lng,delete data.address,delete data.lat,delete data.lng;for(var param in data)data.hasOwnProperty(param)&&marker.push(param+":"+data[param]);marker.length||0===i?(marker.push(loc),marker=marker.join("|"),parameters.push("markers="+encodeURI(marker))):(marker=parameters.pop()+encodeURI("|"+loc),parameters.push(marker))}if(styles)for(var i=0;i<styles.length;i++){var styleRule=[];styles[i].featureType&&styleRule.push("feature:"+styles[i].featureType.toLowerCase()),styles[i].elementType&&styleRule.push("element:"+styles[i].elementType.toLowerCase());for(var j=0;j<styles[i].stylers.length;j++)for(var p in styles[i].stylers[j]){var ruleArg=styles[i].stylers[j][p];"hue"!=p&&"color"!=p||(ruleArg="0x"+ruleArg.substring(1)),styleRule.push(p+":"+ruleArg)}var rule=styleRule.join("|");""!=rule&&parameters.push("style="+rule)}if(polyline){if(data=polyline,polyline=[],data.strokeWeight&&polyline.push("weight:"+parseInt(data.strokeWeight,10)),data.strokeColor){var color=parseColor(data.strokeColor,data.strokeOpacity);polyline.push("color:"+color)}if(data.fillColor){var fillcolor=parseColor(data.fillColor,data.fillOpacity);polyline.push("fillcolor:"+fillcolor)}var path=data.path;if(path.join)for(var pos,j=0;pos=path[j];j++)polyline.push(pos.join(","));else polyline.push("enc:"+path);polyline=polyline.join("|"),parameters.push("path="+encodeURI(polyline))}var dpi=window.devicePixelRatio||1;return parameters.push("scale="+dpi),parameters=parameters.join("&"),static_root+parameters},GMaps.prototype.addMapType=function(mapTypeId,options){if(!options.hasOwnProperty("getTileUrl")||"function"!=typeof options.getTileUrl)throw"'getTileUrl' function required.";options.tileSize=options.tileSize||new google.maps.Size(256,256);var mapType=new google.maps.ImageMapType(options);this.map.mapTypes.set(mapTypeId,mapType)},GMaps.prototype.addOverlayMapType=function(options){if(!options.hasOwnProperty("getTile")||"function"!=typeof options.getTile)throw"'getTile' function required.";var overlayMapTypeIndex=options.index;delete options.index,this.map.overlayMapTypes.insertAt(overlayMapTypeIndex,options)},GMaps.prototype.removeOverlayMapType=function(overlayMapTypeIndex){this.map.overlayMapTypes.removeAt(overlayMapTypeIndex)},GMaps.prototype.addStyle=function(options){var styledMapType=new google.maps.StyledMapType(options.styles,{name:options.styledMapName});this.map.mapTypes.set(options.mapTypeId,styledMapType)},GMaps.prototype.setStyle=function(mapTypeId){this.map.setMapTypeId(mapTypeId)},GMaps.prototype.createPanorama=function(streetview_options){return streetview_options.hasOwnProperty("lat")&&streetview_options.hasOwnProperty("lng")||(streetview_options.lat=this.getCenter().lat(),streetview_options.lng=this.getCenter().lng()),this.panorama=GMaps.createPanorama(streetview_options),this.map.setStreetView(this.panorama),this.panorama},GMaps.createPanorama=function(options){var el=getElementById(options.el,options.context);options.position=new google.maps.LatLng(options.lat,options.lng),delete options.el,delete options.context,delete options.lat,delete options.lng;for(var streetview_events=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],streetview_options=extend_object({visible:!0},options),i=0;i<streetview_events.length;i++)delete streetview_options[streetview_events[i]];for(var panorama=new google.maps.StreetViewPanorama(el,streetview_options),i=0;i<streetview_events.length;i++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(){options[name].apply(this)})}(panorama,streetview_events[i]);return panorama},GMaps.prototype.on=function(event_name,handler){return GMaps.on(event_name,this,handler)},GMaps.prototype.off=function(event_name){GMaps.off(event_name,this)},GMaps.prototype.once=function(event_name,handler){return GMaps.once(event_name,this,handler)},GMaps.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],GMaps.on=function(event_name,object,handler){if(GMaps.custom_events.indexOf(event_name)==-1)return object instanceof GMaps&&(object=object.map),google.maps.event.addListener(object,event_name,handler);var registered_event={handler:handler,eventName:event_name};return object.registered_events[event_name]=object.registered_events[event_name]||[],object.registered_events[event_name].push(registered_event),registered_event},GMaps.off=function(event_name,object){GMaps.custom_events.indexOf(event_name)==-1?(object instanceof GMaps&&(object=object.map),google.maps.event.clearListeners(object,event_name)):object.registered_events[event_name]=[]},GMaps.once=function(event_name,object,handler){if(GMaps.custom_events.indexOf(event_name)==-1)return object instanceof GMaps&&(object=object.map),google.maps.event.addListenerOnce(object,event_name,handler)},GMaps.fire=function(event_name,object,scope){if(GMaps.custom_events.indexOf(event_name)==-1)google.maps.event.trigger(object,event_name,Array.prototype.slice.apply(arguments).slice(2));else if(event_name in scope.registered_events)for(var firing_events=scope.registered_events[event_name],i=0;i<firing_events.length;i++)!function(handler,scope,object){handler.apply(scope,[object])}(firing_events[i].handler,scope,object)},GMaps.geolocate=function(options){var complete_callback=options.always||options.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){options.success(position),complete_callback&&complete_callback()},function(error){options.error(error),complete_callback&&complete_callback()},options.options):(options.not_supported(),complete_callback&&complete_callback())},GMaps.geocode=function(options){this.geocoder=new google.maps.Geocoder;var callback=options.callback;options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")&&(options.latLng=new google.maps.LatLng(options.lat,options.lng)),delete options.lat,delete options.lng,delete options.callback,this.geocoder.geocode(options,function(results,status){callback(results,status)})},"object"==typeof window.google&&window.google.maps&&(google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(latLng){for(var path,bounds=new google.maps.LatLngBounds,paths=this.getPaths(),p=0;p<paths.getLength();p++){path=paths.getAt(p);for(var i=0;i<path.getLength();i++)bounds.extend(path.getAt(i))}return bounds}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(latLng){var bounds=this.getBounds();if(null!==bounds&&!bounds.contains(latLng))return!1;for(var inPoly=!1,numPaths=this.getPaths().getLength(),p=0;p<numPaths;p++)for(var path=this.getPaths().getAt(p),numPoints=path.getLength(),j=numPoints-1,i=0;i<numPoints;i++){var vertex1=path.getAt(i),vertex2=path.getAt(j);(vertex1.lng()<latLng.lng()&&vertex2.lng()>=latLng.lng()||vertex2.lng()<latLng.lng()&&vertex1.lng()>=latLng.lng())&&vertex1.lat()+(latLng.lng()-vertex1.lng())/(vertex2.lng()-vertex1.lng())*(vertex2.lat()-vertex1.lat())<latLng.lat()&&(inPoly=!inPoly),j=i}return inPoly}),google.maps.Circle.prototype.containsLatLng||(google.maps.Circle.prototype.containsLatLng=function(latLng){return!google.maps.geometry||google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),latLng)<=this.getRadius()}),google.maps.Rectangle.prototype.containsLatLng=function(latLng){return this.getBounds().contains(latLng)},google.maps.LatLngBounds.prototype.containsLatLng=function(latLng){return this.contains(latLng)},google.maps.Marker.prototype.setFences=function(fences){this.fences=fences},google.maps.Marker.prototype.addFence=function(fence){this.fences.push(fence)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&n!=1/0&&n!=-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1}),GMaps}),function(window,document,undefined){"use strict";!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(window.jQuery)}(function($){function WebuiPopover(element,options){return this.$element=$(element),options&&("string"!==$.type(options.delay)&&"number"!==$.type(options.delay)||(options.delay={show:options.delay,hide:options.delay})),this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this._targetclick=!1,this.init(),_srcElements.push(this.$element),this}var pluginName="webuiPopover",pluginClass="webui-popover",pluginType="webui.popover",defaults={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1},rtlClass=pluginClass+"-rtl",_srcElements=[],backdrop=$('<div class="webui-popover-backdrop"></div>'),_globalIdSeed=0,_isBodyEventHandled=!1,_offsetOut=-2e3,$document=$(document),toNumber=function(numeric,fallback){return isNaN(numeric)?fallback||0:Number(numeric)},getPopFromElement=function($element){return $element.data("plugin_"+pluginName)},hideAllPop=function(){for(var pop=null,i=0;i<_srcElements.length;i++)pop=getPopFromElement(_srcElements[i]),pop&&pop.hide(!0);$document.trigger("hiddenAll."+pluginType)},hideOtherPops=function(currentPop){for(var pop=null,i=0;i<_srcElements.length;i++)pop=getPopFromElement(_srcElements[i]),pop&&pop.id!==currentPop.id&&pop.hide(!0);$document.trigger("hiddenAll."+pluginType)},isMobile="ontouchstart"in document.documentElement&&/Mobi/.test(navigator.userAgent),pointerEventToXY=function(e){var out={x:0,y:0};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];out.x=touch.pageX,out.y=touch.pageY}else"mousedown"!==e.type&&"mouseup"!==e.type&&"click"!==e.type||(out.x=e.pageX,out.y=e.pageY);return out};WebuiPopover.prototype={init:function(){if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");"manual"!==this.getTrigger()&&(isMobile?this.$element.off("touchend",this.options.selector).on("touchend",this.options.selector,$.proxy(this.toggle,this)):"click"===this.getTrigger()?this.$element.off("click",this.options.selector).on("click",this.options.selector,$.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,$.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,$.proxy(this.mouseleaveHandler,this))),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=_globalIdSeed,this.id=pluginName+this._idSeed,this.options.container=$(this.options.container||document.body).first(),this.options.backdrop&&backdrop.appendTo(this.options.container).hide(),_globalIdSeed++,"sticky"===this.getTrigger()&&this.show(),this.options.selector&&(this._options=$.extend({},this.options,{selector:""}))},destroy:function(){for(var index=-1,i=0;i<_srcElements.length;i++)if(_srcElements[i]===this.$element){index=i;break}_srcElements.splice(index,1),this.hide(),this.$element.data("plugin_"+pluginName,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},getDelegateOptions:function(){var options={};return this._options&&$.each(this._options,function(key,value){defaults[key]!==value&&(options[key]=value)}),options},hide:function(force,event){if((force||"sticky"!==this.getTrigger())&&this._opened){event&&(event.preventDefault(),event.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null);var e=$.Event("hide."+pluginType);if(this.$element.trigger(e,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var that=this;setTimeout(function(){that.$target.hide(),that.getCache()||that.$target.remove()},that.getHideDelay())}this.options.backdrop&&backdrop.hide(),this._opened=!1,this.$element.trigger("hidden."+pluginType,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var that=this,autoHide=that.getAutoHide();autoHide&&(that.autoHideHandler&&clearTimeout(that.autoHideHandler),that.autoHideHandler=setTimeout(function(){that.hide()},autoHide))},delegate:function(eventTarget){var self=$(eventTarget).data("plugin_"+pluginName);return self||(self=new WebuiPopover(eventTarget,this.getDelegateOptions()),$(eventTarget).data("plugin_"+pluginName,self)),self},toggle:function(e){var self=this;e&&(e.preventDefault(),e.stopPropagation(),this.options.selector&&(self=this.delegate(e.currentTarget))),self[self.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){hideAllPop()},hideOthers:function(){hideOtherPops(this)},show:function(){if(!this._opened){var $target=this.getTarget().removeClass().addClass(pluginClass).addClass(this._customTargetClass);if(this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||""===this.content){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||$target.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&""===this.content)return;$target.show()}this.displayContent(),this.options.onShow&&this.options.onShow($target),this.bindBodyEvents(),this.options.backdrop&&backdrop.show(),this._opened=!0,this.resetAutoHide()}},displayContent:function(){var elementPos=this.getElementPosition(),$target=this.getTarget().removeClass().addClass(pluginClass).addClass(this._customTargetClass),$targetContent=this.getContentElement(),targetWidth=$target[0].offsetWidth,targetHeight=$target[0].offsetHeight,placement="bottom",e=$.Event("show."+pluginType);if(this.canEmptyHide()){var content=$targetContent.children().html();if(null!==content&&0===content.trim().length)return}this.$element.trigger(e,[$target]);var optWidth=this.$element.data("width")||this.options.width;""===optWidth&&(optWidth=this._defaults.width),"auto"!==optWidth&&$target.width(optWidth);var optHeight=this.$element.data("height")||this.options.height;""===optHeight&&(optHeight=this._defaults.height),"auto"!==optHeight&&$targetContent.height(optHeight),this.options.style&&this.$target.addClass(pluginClass+"-"+this.options.style),"rtl"!==this.options.direction||$targetContent.hasClass(rtlClass)||$targetContent.addClass(rtlClass),this.options.arrow||$target.find(".webui-arrow").remove(),$target.detach().css({top:_offsetOut,left:_offsetOut,display:"block"}),this.getAnimation()&&$target.addClass(this.getAnimation()),$target.appendTo(this.options.container),placement=this.getPlacement(elementPos),this.$element.trigger("added."+pluginType),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&$targetContent.css("height",$targetContent.outerHeight()),this.$target.addClass("webui-no-padding")),this.options.maxHeight&&$targetContent.css("maxHeight",this.options.maxHeight),this.options.maxWidth&&$targetContent.css("maxWidth",this.options.maxWidth),targetWidth=$target[0].offsetWidth,targetHeight=$target[0].offsetHeight;var postionInfo=this.getTargetPositin(elementPos,placement,targetWidth,targetHeight);if(this.$target.css(postionInfo.position).addClass(placement).addClass("in"),"iframe"===this.options.type){var $iframe=$target.find("iframe"),iframeWidth=$target.width(),iframeHeight=$iframe.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(iframeWidth=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(iframeHeight=this.options.iframeOptions.height),$iframe.width(iframeWidth).height(iframeHeight)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var $arrow=this.$target.find(".webui-arrow");$arrow.removeAttr("style"),"left"===placement||"right"===placement?$arrow.css({top:this.$target.height()/2}):"top"!==placement&&"bottom"!==placement||$arrow.css({left:this.$target.width()/2}),postionInfo.arrowOffset&&(postionInfo.arrowOffset.left===-1||postionInfo.arrowOffset.top===-1?$arrow.hide():$arrow.css(postionInfo.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+pluginType,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var id=pluginName+this._idSeed;this.$target=$(this.options.template).attr("id",id),this._customTargetClass=this.$target.attr("class")!==pluginClass?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",id)}return this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget:function(){this.$target.remove(),this.$target=null,this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+pluginClass+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+pluginClass+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return toNumber(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return toNumber(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var dataAttr=this.$element.attr("data-cache");if("undefined"!=typeof dataAttr)switch(dataAttr.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var dataAttr=this.$element.attr("data-delay-show");return"undefined"!=typeof dataAttr?dataAttr:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var dataAttr=this.$element.attr("data-delay-hide");return"undefined"!=typeof dataAttr?dataAttr:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){var dataAttr=this.$element.attr("data-animation");return dataAttr||this.options.animation},getHideAnimation:function(){var ani=this.getAnimation();return ani?ani+"-out":"out"},setTitle:function(title){var $titleEl=this.getTitleElement();title?("rtl"!==this.options.direction||$titleEl.hasClass(rtlClass)||$titleEl.addClass(rtlClass),$titleEl.html(title)):$titleEl.remove()},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&"html"===this.options.type},getIframe:function(){var $iframe=$("<iframe></iframe>").attr("src",this.getUrl()),self=this;return $.each(this._defaults.iframeOptions,function(opt){"undefined"!=typeof self.options.iframeOptions[opt]&&$iframe.attr(opt,self.options.iframeOptions[opt])}),$iframe},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=$(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(error){
throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var content="";if(content=$.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||content,!this.content){var $next=this.$element.next();$next&&$next.hasClass(pluginClass+"-content")&&(this.content=$next)}}return this.content},setContent:function(content){var $target=this.getTarget(),$ct=this.getContentElement();"string"==typeof content?$ct.html(content):content instanceof $&&($ct.html(""),this.options.cache?content.removeClass(pluginClass+"-content").appendTo($ct):content.clone(!0,!0).removeClass(pluginClass+"-content").appendTo($ct)),this.$target=$target},isAsync:function(){return"async"===this.options.type},setContentASync:function(content){var that=this;this.xhr||(this.xhr=$.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(xhr,settings){that.options.async.before&&that.options.async.before(that,xhr,settings)},success:function(data){that.bindBodyEvents(),content&&$.isFunction(content)?that.content=content.apply(that.$element[0],[data]):that.content=data,that.setContent(that.content);var $targetContent=that.getContentElement();$targetContent.removeAttr("style"),that.displayContent(),that.options.async.success&&that.options.async.success(that,data)},complete:function(){that.xhr=null},error:function(xhr,data){that.options.async.error&&that.options.async.error(that,xhr,data)}}))},bindBodyEvents:function(){_isBodyEventHandled||(this.options.dismissible&&"click"===this.getTrigger()?isMobile?$document.off("touchstart.webui-popover").on("touchstart.webui-popover",$.proxy(this.bodyTouchStartHandler,this)):($document.off("keyup.webui-popover").on("keyup.webui-popover",$.proxy(this.escapeHandler,this)),$document.off("click.webui-popover").on("click.webui-popover",$.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&$document.off("touchend.webui-popover").on("touchend.webui-popover",$.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(e){var self=this;e&&this.options.selector&&(self=this.delegate(e.currentTarget)),self._timeout&&clearTimeout(self._timeout),self._enterTimeout=setTimeout(function(){self.getTarget().is(":visible")||self.show()},this.getDelayShow())},mouseleaveHandler:function(){var self=this;clearTimeout(self._enterTimeout),self._timeout=setTimeout(function(){self.hide()},this.getHideDelay())},escapeHandler:function(e){27===e.keyCode&&this.hideAll()},bodyTouchStartHandler:function(e){var self=this,$eventEl=$(e.currentTarget);$eventEl.on("touchend",function(e){self.bodyClickHandler(e),$eventEl.off("touchend")}),$eventEl.on("touchmove",function(){$eventEl.off("touchend")})},bodyClickHandler:function(e){_isBodyEventHandled=!0;for(var canHide=!0,i=0;i<_srcElements.length;i++){var pop=getPopFromElement(_srcElements[i]);if(pop&&pop._opened){var offset=pop.getTarget().offset(),popX1=offset.left,popY1=offset.top,popX2=offset.left+pop.getTarget().width(),popY2=offset.top+pop.getTarget().height(),pt=pointerEventToXY(e),inPop=pt.x>=popX1&&pt.x<=popX2&&pt.y>=popY1&&pt.y<=popY2;if(inPop){canHide=!1;break}}}canHide&&hideAllPop()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",$.proxy(this.mouseenterHandler,this)).on("mouseleave",$.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",$.proxy(this.hide,this,!0))},getPlacement:function(pos){var placement,container=this.options.container,clientWidth=container.innerWidth(),clientHeight=container.innerHeight(),scrollTop=container.scrollTop(),scrollLeft=container.scrollLeft(),pageX=Math.max(0,pos.left-scrollLeft),pageY=Math.max(0,pos.top-scrollTop);placement="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var isH="horizontal"===placement,isV="vertical"===placement,detect="auto"===placement||isH||isV;return detect?placement=pageX<clientWidth/3?pageY<clientHeight/3?isH?"right-bottom":"bottom-right":pageY<2*clientHeight/3?isV?pageY<=clientHeight/2?"bottom-right":"top-right":"right":isH?"right-top":"top-right":pageX<2*clientWidth/3?pageY<clientHeight/3?isH?pageX<=clientWidth/2?"right-bottom":"left-bottom":"bottom":pageY<2*clientHeight/3?isH?pageX<=clientWidth/2?"right":"left":pageY<=clientHeight/2?"bottom":"top":isH?pageX<=clientWidth/2?"right-top":"left-top":"top":pageY<clientHeight/3?isH?"left-bottom":"bottom-left":pageY<2*clientHeight/3?isV?pageY<=clientHeight/2?"bottom-left":"top-left":"left":isH?"left-top":"top-left":"auto-top"===placement?placement=pageX<clientWidth/3?"top-right":pageX<2*clientWidth/3?"top":"top-left":"auto-bottom"===placement?placement=pageX<clientWidth/3?"bottom-right":pageX<2*clientWidth/3?"bottom":"bottom-left":"auto-left"===placement?placement=pageY<clientHeight/3?"left-top":pageY<2*clientHeight/3?"left":"left-bottom":"auto-right"===placement&&(placement=pageY<clientHeight/3?"right-bottom":pageY<2*clientHeight/3?"right":"right-top"),placement},getElementPosition:function(){var elRect=this.$element[0].getBoundingClientRect(),container=this.options.container,cssPos=container.css("position");if(container.is(document.body)||"static"===cssPos)return $.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||elRect.width,height:this.$element[0].offsetHeight||elRect.height});if("fixed"===cssPos){var containerRect=container[0].getBoundingClientRect();return{top:elRect.top-containerRect.top+container.scrollTop(),left:elRect.left-containerRect.left+container.scrollLeft(),width:elRect.width,height:elRect.height}}return"relative"===cssPos?{top:this.$element.offset().top-container.offset().top,left:this.$element.offset().left-container.offset().left,width:this.$element[0].offsetWidth||elRect.width,height:this.$element[0].offsetHeight||elRect.height}:void 0},getTargetPositin:function(elementPos,placement,targetWidth,targetHeight){var pos=elementPos,container=this.options.container,elementW=this.$element.outerWidth(),elementH=this.$element.outerHeight(),scrollTop=document.documentElement.scrollTop+container.scrollTop(),scrollLeft=document.documentElement.scrollLeft+container.scrollLeft(),position={},arrowOffset=null,arrowSize=this.options.arrow?20:0,padding=10,fixedW=elementW<arrowSize+padding?arrowSize:0,fixedH=elementH<arrowSize+padding?arrowSize:0,refix=0,pageH=document.documentElement.clientHeight+scrollTop,pageW=document.documentElement.clientWidth+scrollLeft,validLeft=pos.left+pos.width/2-fixedW>0,validRight=pos.left+pos.width/2+fixedW<pageW,validTop=pos.top+pos.height/2-fixedH>0,validBottom=pos.top+pos.height/2+fixedH<pageH;switch(placement){case"bottom":position={top:pos.top+pos.height,left:pos.left+pos.width/2-targetWidth/2};break;case"top":position={top:pos.top-targetHeight,left:pos.left+pos.width/2-targetWidth/2};break;case"left":position={top:pos.top+pos.height/2-targetHeight/2,left:pos.left-targetWidth};break;case"right":position={top:pos.top+pos.height/2-targetHeight/2,left:pos.left+pos.width};break;case"top-right":position={top:pos.top-targetHeight,left:validLeft?pos.left-fixedW:padding},arrowOffset={left:validLeft?Math.min(elementW,targetWidth)/2+fixedW:_offsetOut};break;case"top-left":refix=validRight?fixedW:-padding,position={top:pos.top-targetHeight,left:pos.left-targetWidth+pos.width+refix},arrowOffset={left:validRight?targetWidth-Math.min(elementW,targetWidth)/2-fixedW:_offsetOut};break;case"bottom-right":position={top:pos.top+pos.height,left:validLeft?pos.left-fixedW:padding},arrowOffset={left:validLeft?Math.min(elementW,targetWidth)/2+fixedW:_offsetOut};break;case"bottom-left":refix=validRight?fixedW:-padding,position={top:pos.top+pos.height,left:pos.left-targetWidth+pos.width+refix},arrowOffset={left:validRight?targetWidth-Math.min(elementW,targetWidth)/2-fixedW:_offsetOut};break;case"right-top":refix=validBottom?fixedH:-padding,position={top:pos.top-targetHeight+pos.height+refix,left:pos.left+pos.width},arrowOffset={top:validBottom?targetHeight-Math.min(elementH,targetHeight)/2-fixedH:_offsetOut};break;case"right-bottom":position={top:validTop?pos.top-fixedH:padding,left:pos.left+pos.width},arrowOffset={top:validTop?Math.min(elementH,targetHeight)/2+fixedH:_offsetOut};break;case"left-top":refix=validBottom?fixedH:-padding,position={top:pos.top-targetHeight+pos.height+refix,left:pos.left-targetWidth},arrowOffset={top:validBottom?targetHeight-Math.min(elementH,targetHeight)/2-fixedH:_offsetOut};break;case"left-bottom":position={top:validTop?pos.top-fixedH:padding,left:pos.left-targetWidth},arrowOffset={top:validTop?Math.min(elementH,targetHeight)/2+fixedH:_offsetOut}}return position.top+=this.getOffsetTop(),position.left+=this.getOffsetLeft(),{position:position,arrowOffset:arrowOffset}}},$.fn[pluginName]=function(options,noInit){var results=[],$result=this.each(function(){var webuiPopover=$.data(this,"plugin_"+pluginName);webuiPopover?"destroy"===options?webuiPopover.destroy():"string"==typeof options&&results.push(webuiPopover[options]()):(options?"string"==typeof options?"destroy"!==options&&(noInit||(webuiPopover=new WebuiPopover(this,null),results.push(webuiPopover[options]()))):"object"==typeof options&&(webuiPopover=new WebuiPopover(this,options)):webuiPopover=new WebuiPopover(this,null),$.data(this,"plugin_"+pluginName,webuiPopover))});return results.length?results:$result};var webuiPopovers=function(){var _hideAll=function(){hideAllPop()},_create=function(selector,options){options=options||{},$(selector).webuiPopover(options)},_isCreated=function(selector){var created=!0;return $(selector).each(function(i,item){created=created&&$(item).data("plugin_"+pluginName)!==undefined}),created},_show=function(selector,options){options?$(selector).webuiPopover(options).webuiPopover("show"):$(selector).webuiPopover("show")},_hide=function(selector){$(selector).webuiPopover("hide")},_setDefaultOptions=function(options){defaults=$.extend({},defaults,options)},_updateContent=function(selector,content){var pop=$(selector).data("plugin_"+pluginName);if(pop){var cache=pop.getCache();pop.options.cache=!1,pop.options.content=content,pop._opened?(pop._opened=!1,pop.show()):pop.isAsync()?pop.setContentASync(content):pop.setContent(content),pop.options.cache=cache}},_updateContentAsync=function(selector,url){var pop=$(selector).data("plugin_"+pluginName);if(pop){var cache=pop.getCache(),type=pop.options.type;pop.options.cache=!1,pop.options.url=url,pop._opened?(pop._opened=!1,pop.show()):(pop.options.type="async",pop.setContentASync(pop.content)),pop.options.cache=cache,pop.options.type=type}};return{show:_show,hide:_hide,create:_create,isCreated:_isCreated,hideAll:_hideAll,updateContent:_updateContent,updateContentAsync:_updateContentAsync,setDefaultOptions:_setDefaultOptions}}();window.WebuiPopovers=webuiPopovers})}(window,document);var TIMEOUT=500,EVENT_KEY="resizeend",$window=$(window),timer;window.addEventListener("resize",function(){clearTimeout(timer),timer=setTimeout(function(){$(window).trigger(EVENT_KEY)},TIMEOUT)}),$(".page__footer .year").html((new Date).getFullYear()),function($,viewport){$(document).ready(function(){function makeHeaderFluid(){$("#header > div").removeClass("container").addClass("container-fluid")}function makeHeaderBlock(){$("#header > div").removeClass("container-fluid").addClass("container")}viewport.is("lg")?makeHeaderBlock():makeHeaderFluid(),$(window).resize(viewport.changed(function(){viewport.is("lg")?makeHeaderBlock():makeHeaderFluid()}))})}(jQuery,ResponsiveBootstrapToolkit);var coordinates_mark=[53.9463623,27.6018749],coordinates_map_larg=[53.94651407,27.59663701],coordinates_map_small=[53.9463623,27.6018749],coordinates_map=coordinates_map_larg,map;map=new GMaps({el:"#gmap",scrollwheel:!1,lat:coordinates_map[0],lng:coordinates_map[1],zoom:16,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT}}),map.drawOverlay({lat:coordinates_mark[0],lng:coordinates_mark[1],verticalAlign:"top",horizontalAlign:"center",content:'<div class="map-marker" domflag >220090, г. Минск, ул. Олешева, 14</div>\n<div class="pulse"></div>'}),function($,viewport){$(document).ready(function(){function makePanels(){var mainMenu=$(".main-menu"),liDropdown=$(".main-menu > .dropdown");mainMenu.removeClass("nav navbar-nav").removeAttr("data-hover").addClass("panel-group list-unstyled").attr("id","menu-accordion"),liDropdown.removeClass("dropdown").addClass("panel panel-default").find(".dropdown-toggle").each(function(index){$(this).wrap('<div class="panel-heading"></div>').removeClass("dropdown-toggle").addClass("accordion-toggle collapsed").attr("data-toggle","collapse").attr("data-parent","#menu-accordion").removeAttr("role").attr("href","#menu-collapse-"+index)}),liDropdown.find(".dropdown-menu").each(function(index){$(this).removeClass("dropdown-menu dropdownhover-bottom").addClass("list-unstyled").removeAttr("role").wrap('<div class="panel-collapse collapse" aria-expanded="false">').parent(".panel-collapse").attr("id","menu-collapse-"+index)})}function makeDropdown(){var mainMenu=$(".main-menu");mainMenu.removeClass("panel-group list-unstyled").removeAttr("id").attr("data-hover","dropdown").addClass("nav navbar-nav").find(".panel").each(function(index){var list=$(this).find("ul.list-unstyled");$(this).removeClass("panel panel-default").addClass("dropdown").find(".accordion-toggle").unwrap().attr("href","#").removeClass("accordion-toggle collapsed").removeAttr("data-parent").addClass("dropdown-toggle").attr("role","button").attr("data-toggle","dropdown"),list.unwrap().addClass("dropdown-menu dropdownhover-bottom").removeClass("list-unstyled").attr("role","menu")})}function moveToTop(){$("#page-menu").insertAfter($("#header"))}function moveToBottom(){$("#page-menu").insertAfter($("#slider"))}viewport.is(">=sm")?(makeDropdown(),moveToBottom()):(makePanels(),moveToTop()),$(window).resize(viewport.changed(function(){viewport.is(">=sm")?(makeDropdown(),moveToBottom()):(makePanels(),moveToTop())}))})}(jQuery,ResponsiveBootstrapToolkit),$("#btn-basket").webuiPopover({padding:!1,width:300}),$(".btn-close").click(function(){$(this).parent(".item-basket").slideUp("400")}),$(function(){$("#btn-login").webuiPopover({padding:!1,width:300})}),function($,viewport){$(document).ready(function(){function makeSearchFormLarge(){$(".webui-popover-content-search .panel-body #search-form").remove();var markupLarge='<form id="search-form" class="search-form" role="search"><div class="input-group"><input type="text" name="query" class="form-control" placeholder="Найти..."><span class="input-group-btn"><button type="submit" class="btn btn-info"><i class="glyphicon glyphicon-search"></i></button></span></div></form>';$(".block-search").html(markupLarge)}function makeSearchFormSmall(){$(".block-search #search-form").remove();var markupSmall='<form id="search-form" class="search-form" role="search"><div class="form-group"><input type="text" name="query" class="form-control" placeholder="Найти..."></div><button type="submit" class="btn btn-info">Поиск</button></form>';$(".webui-popover-content-search .panel-body").html(markupSmall)}$("#btn-search").webuiPopover({padding:!1,width:300}),viewport.is(">=md")&&!viewport.is("xxs")?makeSearchFormLarge():makeSearchFormSmall(),$(window).resize(viewport.changed(function(){viewport.is(">=md")&&!viewport.is("xxs")?makeSearchFormLarge():makeSearchFormSmall(),$(".page").click()}))})}(jQuery,ResponsiveBootstrapToolkit),function($,viewport){$(document).ready(function(){function createPanels(){$("#accordion > div").removeClass().addClass("panel panel-default").find('[id^="collapse-"]').addClass("panel-collapse collapse"),$(".icon-marck-blue, .icon-mail-blue").after('<div class="clearfix"></div>')}function createBlocks(){$("#accordion > div").removeClass().addClass("col-xs-6 col-md-3").find('[id^="collapse-"]').removeClass("panel-collapse collapse")}viewport.is("xxs")?createPanels():viewport.is("<xxs")&&!viewport.is("xxs")&&createBlocks(),$(window).resize(viewport.changed(function(){viewport.is("xxs")?createPanels():viewport.is("<xxs")&&!viewport.is("xxs")&&createBlocks()}))})}(jQuery,ResponsiveBootstrapToolkit);